# TestADC_CH58x_CH59x
ADC test in USB2.0FS for CH58x and CH59x


Тестирование передачи непрерывного потока с ADC в USB2.0FS CDC (COM порт).

Модули CH583 (75 руб на али) и CH592 (~120 руб):


CH59x имеет аппаратную функцию сканирования по списку входов, а в CH58x входы ADC переключаются только программно.

USB2.0FS у обоих в CDC дает поток чистых данных более 800 килобайт в секунду.

Приемлемая кратность для передачи ADC в USB выходит 375 кsps (2 байта на замер, плюс заголовок фрейма).

Собственных шумов у ADC мало – дрожит всего 1 бит. Но Ref у разных чипов отличается – имеются расхождения и для ответственных задач требуется калибровка.

У CH592 странно работает PGA со значений более +18дБ. У CH583 таких переключений PGA нет.

Минимальная частота замеров ADC при непрерывном опросе DMA и максимальном значении задержки между замерами около 15 кГц.

Потребление по линии 5B при работе на 375 кsps в USB около 12 мА. При включении встроенного DC-DC – 10 мА. Но для уменьшения шума DC-DC лучше выключить, хотя на сам ADC это не влияет, но может создавать импульсы в цепь питания 3.3В датчиков.

При включенном входном буфере у ADC сопротивления входов очень большие и если вход никуда на припаян не плате, то успешно принимает наводку 50Гц.

При дифференциальном измерении входной буфер не используется – не рекомендовано в PDF.

В итоге из модуля на CH582F выходит самый дешевый 12 битный ADC в максимум USB2.0FS и приемлемыми характеристиками по линейности замеров и шумам. А на модуле с CH592F многоканальный ADC…
